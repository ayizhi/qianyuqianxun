"use strict";Z(function(){function a(a){function b(a){var b,c,d,e,f,g=Z(a).parent().width(),h=Z(a).parent().height(),i=Z(a).data("w"),j=Z(a).data("h");b=j*g>i*h?g/i:h/j,c=i*b,d=j*b,e=(g-c)/2,f=(h-d)/2,Z(a).css({top:f,left:e,width:c,height:d})}var d=Z("#list"),e=a.length;if(1>e)return void d.html('<div id="empty">当前内容为空</div>');var f,g,h="",i=Z(".card .head").width()*window.dpi,j=Z(".card").width()*window.dpi,k=Z(".card").height()*window.dpi,l="?"+qnImg.base()+qnImg.and+qnImg.min(i,i),m="?"+qnImg.base()+qnImg.and+qnImg.format("jpg")+qnImg.and+qnImg.min(j,k)+qnImg.and+qnImg.interlace();for(f=0;e>f;f++){switch(g=a[f],g.date=getDateFromTs(g.createTime),g.status){case window.actConfig.registering:g.statusText="报名中";break;case window.actConfig.linking:g.statusText="牵线中";break;case window.actConfig.dating:g.statusText="约会中";break;default:g.statusText="异常状态"}g.cover+=m,h+=format(c,g)}for(d.html(h),f=0;e>f;f++)g=a[f],lazyLoadImg(g.creatorHead+l,Z("#card"+g.actId+" .head"));d.find(".cover").each(function(){var a=Z(this).attr("psrc");a&&(Z(this).removeAttr("psrc"),this.onload=function(){Z(this).parent().find(".mask").show(),Z(this).data("w",this.width).data("h",this.height),b(this)},this.src=a)}),Z(window).on("resize",function(){d.find(".cover").each(function(){b(this)})}),Z("#empty").show().find("button").on("click",function(){window.location.href="createAct.html"+getCommonParams()})}function b(){d||(d=!0,Z.ajax({url:window.actionUrl.getActList.url,type:window.actionUrl.getActList.type,data:getCommonReqData(),success:function(b){b=checkReply(b),b&&a(b.list)},error:function(a){noNetwork()},complete:function(){d=!1}}))}var c=['<div class="card" id="card{actId}" token="{actToken}">','<img psrc="{cover}" class="cover">','<div class="mask"></div>','<div class="content">','<div class="title">{title}</div>','<div class="info">','<div class="head bgCon"></div>','<span class="name">{creatorName}</span>','<span class="gap">·</span>','<span class="date">{date}</span>','<button class="status">{statusText}</button>',"</div>","</div>","</div>"].join(""),d=!1;b(),Z("#list").on("click",".card",function(){var a=parseInt(Z(this).attr("id").substring("card".length)),b=Z(this).attr("token");window.location.href="actDetail.html"+getCommonParams()+"&actId="+encodeURIComponent(a)+"&actToken="+encodeURIComponent(b)})});
//# sourceMappingURL=actList.js.map