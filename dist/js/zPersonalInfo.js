var personalPage=function(a,b,c){var d,e,f,g={main_html:['<div id = "{infoId}" class = "personalInfo {classSex}">','<div class = "headBg">','<div class = "headImg" psrc = "{headsrc}"></div>','<div class =  "headInfo">','<span class = "tableNum">{tableNum}</span>','<span class = "dot">&nbsp·&nbsp</span>','<span class = "nickname">{nickname}</span>','<span class = "dot">&nbsp·&nbsp</span>','<span class = "xingZuo">{xingZuo}</span>',"</div>","</div>",'<div class = "below">','<div class = "photos">',"</div>",'<div class = "originInfo">','<div class = "infoTitle">个人基本信息</div>','<div class = "age simpleInfo">','<span class = "infoName">年龄</span>','<span class = "infoContent">{age}</span>',"</div>",'<div class = "location simpleInfo">','<span class = "infoName">城市</span>','<span class = "infoContent">{city}</span>',"</div>","</div>",'<div class = "selfIntro intro">','<div class = "infoTitle">自我描述</div>','<span class = "selfContent text">',"{selfContent}","</span>","</div>",'<div class = "reqIntro intro">','<div class = "infoTitle">需求描述</div>','<span class = "reqContent text">',"{reqContent}","</span>","</div>","</div>","</div>"].join(""),personalInfoBg:['<div id = "personalInfoBg" class = "personalInfoBg"></div>'].join(""),upAndDown:['<div id = "upAndDown" class = "upAndDown {classSex}">','<button class = "up"></button>','<button class = "down"></button>','<div class = "middle"></div>',"</div>"].join(""),upAndDownClass:["middle","after1","after2","before2","before1"],upAndDownClassAfter:[]};return d=function(a,b){var c={actId:b.actId,actToken:b.actToken,num:b.num,sex:b.sex,allPeople:b.allPeople||{}};g.$container=a,g.sex=c.sex,g.nowNum=c.num,g.nowIdSex=0==g.sex?"female":"male",g.nowTableSex=0==g.sex?"女":"男",g.nowPersonId=g.nowIdSex+g.nowNum,g.allData=b.allPeople[g.nowIdSex],g.guestData={};for(var d=0;d<g.allData.length;d++){var h=g.allData[d],i=0==h.sex?"female":"male",j=h.num,k=0==h.sex?"女":"男",l=i+j,m=getAgeFromDate(h.birthday),n=getXingZuoFromDate(h.birthday),o={infoId:i+j,classSex:i,tableNum:k+j+"号",nickname:h.nickname||"",xingZuo:n||"",headSrc:h.headImg||"",headImage:h.headImage||"",city:h.province+h.city||"",age:m||"",selfContent:h.selfIntro||"",reqContent:h.expectation||"",photos:h.photos||"",num:h.num||0};g.guestData[l]=o}e(),f()},e=function(){var a=g.$container,c=g.guestData,d=format(g.upAndDown,{classSex:g.nowIdSex}),e=20;g.tmp={};for(var f in c){g.tmp[c[f]]=format(g.main_html,c[f]),document.getElementById("personalInfoBg")||(console.log("会计核算发达国防建设大方asdhakjasdfkj"),a.html(b(g.personalInfoBg)),setTimeout(function(){b("#personalInfoBg").addClass("onMove")},e)),document.getElementById("upAndDown")||(a.append(b(d)),setTimeout(function(){b("#upAndDown").addClass("onMove")},e)),a.append(b(g.tmp[c[f]])),g.upAndDownClass=["middle","after1","after2","before2","before1"];var h=c[f].num,i=g.nowNum,j=h-i>=0?h-i:5+(h-i);b("#"+f).addClass(g.upAndDownClass[j]),g.upAndDownClassAfter[h-1]=g.upAndDownClass[j],f!=g.nowPersonId&&b("#"+f).addClass("onMove"),setTimeout(function(){b("#"+g.nowPersonId).addClass("onMove")},e);var k=c[f].headImage;_loadImg(k,b("#"+f+" .headBg .headImg"));var l=c[f].photos;g.photos=l;for(var m=0;m<l.length;m++){var n=b('<div class = "img" psrc = '+l[m]+" osrc = "+l[m]+" ></div>");lazyLoadImg(l[m],n),b("#"+f+" .photos").append(n)}}},f=function(){b("#personalInfo").on("click",".personalInfo .below .photos .img",function(){var a=b(this).attr("osrc");wxPreviewImg(a,g.photos)}).find(".img").each(function(){var a=b(this).attr("psrc");a&&lazyLoadImg(a,this)}),b("#personalInfoBg").on("click",function(){b("#personalInfo").children("div").each(function(){b(this).removeClass("onMove")}),setTimeout(function(){b("#personalInfo").html("")},300)}),b("#"+g.personId+" .below").on("touchstart",function(a){startX=a.touches[0].pageX,startY=a.touches[0].pageY,console.log(b(this).height())}),b("#"+g.personId+" .below").on("touchmove",function(a){var b=(a.touches[0].pageX,a.touches[0].pageY);b-startY}),b("#"+g.personId+" .below").on("touchend",function(a){endX=a.changedTouches[0].pageX,endY=a.changedTouches[0].pageY});var a=[];b("#upAndDown .down").on("click",function(){_cloneGroup(a,g.upAndDownClassAfter),g.upAndDownClassAfter.unshift(g.upAndDownClassAfter.pop()),g.$container.children(".personalInfo").each(function(c,d){console.log("index",c),b(this).removeClass(a[c]),console.log(a[c]),b(this).addClass(g.upAndDownClassAfter[c]),console.log(g.upAndDownClassAfter[c])})}),b("#upAndDown .up").on("click",function(){_cloneGroup(a,g.upAndDownClassAfter),g.upAndDownClassAfter.push(g.upAndDownClassAfter.shift()),g.$container.children(".personalInfo").each(function(c,d){console.log("index",c),b(this).removeClass(a[c]),console.log(a[c]),b(this).addClass(g.upAndDownClassAfter[c]),console.log(g.upAndDownClassAfter[c])})})},_loadImg=function(a,b){b.html(a);var c,d,e=a.width,f=a.height,g=b.width(),h=b.height(),i=b.find("img");e>f?(c=e*h/f,i.css({width:c,height:h})):(d=f*g/e,i.css({width:g,height:d}))},_cloneGroup=function(a,b){for(var c=0;c<b.length;c++)a[c]=b[c];return a},{init:d}}(window,$);
//# sourceMappingURL=zPersonalInfo.js.map