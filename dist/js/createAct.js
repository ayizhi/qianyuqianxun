"use strict";Z(function(){qiNiuReady(function(){var a=myUp({bb:"qnPicker",con:"qnCon"});a.bind("FileUploaded",function(a,b,c){console.log("FileUploaded",arguments);var d=a.getOption("domain");c=JSON.parse(c.response);var e=d+c.key;lazyLoadImg(e,Z("#qnPicker")),Z("#qnPicker").data("src",e)})}),Z("#linkDurationInput").mySelect(function(a){return a+"天"}),Z("#permissionInput").mySelect(function(a){switch(parseInt(a)){case 0:return"好友可见";case 1:return"所有人可见";default:alert("挑战权限选择异常"+a)}});var a=window.imgUrl.coverEg;lazyLoadImg(a,Z("#qnPicker")),Z("#qnPicker").data("src",a);var b=!1;Z("#submit").on("click",function(){if(!b){var a=Z("#titleInput").val();if(!a||!a.length)return void Z("#titleInput").addClass("warning").focus();var c=Z("#introInput").val();if(!c||!c.length)return void Z("#introInput").addClass("warning").focus();var d=Z("#deadlineInput").val(),e=Z("#linkDurationInput").val(),f=Z("#qnPicker").data("src"),g=Z("#permissionInput").val();b=!0,Z("#submit").html("创建中...");var h={title:titleInput,deadline:d,linkDuration:e,cover:f,permission:g};Z.ajax({url:window.actionUrl.createAct.url,type:window.actionUrl.createAct.type,data:Z.extend(getCommonReqData(),h),success:function(a){console.log("submit reply",a),a=checkReply(a),a&&(0==a.status?(alert("恭喜创建约会挑战成功"),window.location.href="creatorCard.html"+getCommonParams()+"&actId="+encodeURIComponent(a.actId)+"&actToken="+encodeURIComponent(a.actToken)):(alert("创建失败，请重试"),pageReload()))},error:function(a){console.log("submit error",a),noNetwork()},complete:function(){console.log("submit complete"),b=!1,Z("#submit").html("创建")}})}})});
//# sourceMappingURL=createAct.js.map