Z(function(){function a(a){function c(a){var b=a.headImage,c=a.nickName;if(0==a.sex){var d=q.children(".headImg");i(b,d),q.children(".name").html(c)}else if(1==a.sex){var d=o.children(".headImg");i(b,d),o.children(".name").html(c)}}function d(){var a=s.width()+1*window.fontSize,b=(e(".headBg").height(),.3);t.css("transition","all "+b+"s linear 0s"),q.css({transform:"translateX("+a+"px)",opacity:"0"}),o.css({transform:"translateX("+-1*a+"px)",opacity:"0"}),s.css("transition","all "+b+"s linear 0s"),s.css("transform","scale(0,1)"),setTimeout(function(){h(),t.css("transition","none"),r.html("女嘉宾"),p.html("男嘉宾"),q.css({transform:"translateX(0px)",opacity:"0",transform:"scale(0.6,0.6)"}),o.css({transform:"translateX(0px)",opacity:"0",transform:"scale(0.6,0.6)"}),s.css("transition","all "+b+"s linear 0s"),s.css("transform","scale(0.1,1)"),setTimeout(function(){t.css("transition","all "+b+"s linear 0s"),q.css({transform:"translateX(0px)",opacity:"100",transform:"scale(1,1)"}),o.css({transform:"translateX(0px)",opacity:"100",transform:"scale(1,1)"}),s.css("transition","all "+b+"s linear 0s"),s.css("transform","scale(1,1)")},20)},1e3*b)}function h(){t.css("transition","none"),q.css({transform:"translateY(0px)",opacity:"100"}),o.css({transform:"translateY(0px)",opacity:"100"}),q.children(".headImg").html("").children(".name").html("女嘉宾"),o.children(".headImg").html("").children(".name").html("男嘉宾")}function i(a,b){b.html(a);var c,d,e=a.width,f=a.height,g=b.width(),h=b.height(),i=b.find("img");e>f?(c=e*h/f,i.css({width:c,height:h})):(d=f*g/e,i.css({width:g,height:d}))}function u(a){for(var b={actId:f,actToken:g,sex:a.sex,num:a.guestNumber,allPeople:{male:[{nickname:"num1号",num:1,sex:1,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"num2号",num:2,sex:1,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"num3号",num:3,sex:1,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"num4号",num:4,sex:1,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"num5号",num:5,sex:1,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"}],female:[{nickname:"女5号",num:1,sex:0,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"女5号",num:2,sex:0,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"女5号",num:3,sex:0,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"女5号",num:4,sex:0,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"},{nickname:"女5号",num:5,sex:0,birthday:"1992-03-13",province:"广东",city:"广州",photos:["http://7xn981.com2.z0.glb.qiniucdn.com/image.jpeg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g5tuc68ff14rl19in7lm10mi7.jpg","http://7xn981.com2.z0.glb.qiniucdn.com/o_1a1g60muu90o1jl91g49q8h1qbe7.jpg"],selfIntro:"身高165cm，略瘦。大胃爱美食，开朗偶抽风，有时反射弧比较长…… 大部分时候外向加欢脱，但常常也比较纠结。曾经一度是大爱热血少年漫的死宅【不腐】，现在喜欢看小说看电影看话剧。微颜控，喜欢美丽和萌的东西，最怕鬼故事。。。爱好唱唱歌，有时间也想旅游，想出门走走停停。希望生活安乐满足，偶尔关注下养生神马……想去港丽餐厅吃饭",expectation:"175~185，斯文温和，成熟靠谱，让人有安全感。喜欢运动，阳光乐观。有爱心和耐心，有主见，不必外向直接但希望ta真诚"}]}},c=e("#personalInfo"),d=0;d<j.person.length;d++){var h=j.person[d];0==h.sex?(b.allPeople.female[h.guestNumber-1].headImage=h.headImage,b.allPeople.female[h.guestNumber-1].headImg=h.headImg):1==h.sex&&(b.allPeople.male[h.guestNumber-1].headImage=h.headImage,b.allPeople.male[h.guestNumber-1].headImg=h.headImg)}personalPage.init(c,e.extend(b))}var v={pairs:a.pairs,females:a.females,males:a.males,defaultFemaleHead:window.imgUrl.femaleHead,defaultMaleHead:window.imgUrl.maleHead,headSize:k,borderSize:Math.ceil(.1*window.fontSize),femaleLeft:l,maleLeft:m,headTop:n,pointSize:Math.ceil(.3*window.fontSize),betweenPoint:4*window.fontSize,pointMagin:.5*window.fontSize,headBgColorWhite:"#fff",headBgColorPink:"#ea4c89",pointColorGray:"#E2D0C4",pointColorPink:"#ea4c89",personalInfo:u,linkPeople:c,linkFinished:d,linkRefresh:h};j=new b(v)}function b(a){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.scale=window.devicePixelRatio||2,this.canvas.width=e(document.body).width()*this.scale,this.canvas.height=e(this.canvas).height()*this.scale,this.males=a.males,this.females=a.females,this.defaultMaleHead=a.defaultMaleHead,this.defaultFemaleHead=a.defaultFemaleHead,this.pairs=a.pairs,this.headSize=a.headSize*this.scale,this.borderSize=a.borderSize*this.scale,this.pointSize=a.pointSize*this.scale,this.pointMagin=a.pointMagin*this.scale,this.betweenPoint=a.betweenPoint*this.scale,this.femaleLeft=a.femaleLeft*this.scale,this.maleLeft=a.maleLeft*this.scale,this.headTop=a.headTop*this.scale,this.person=[],this.lines={},this.headBgColorWhite=a.headBgColorWhite,this.headBgColorPink=a.headBgColorPink,this.pointColorGray=a.pointColorGray,this.pointColorPink=a.pointColorPink,this.lineColor=a.headBgColorPink,this.defaultHeadFinished=!1,this.headsFinished=!1,this.menHead=[],this.woMenHead=[],this.peopleCount=0,this.headDefault=0,this.bindEvent=!1,this.personalInfo=a.personalInfo,this.linkPeople=a.linkPeople,this.linkFinished=a.linkFinished,this.linkRefresh=a.linkRefresh,this.init()}function c(a){this.guestId=a.guestId,this.guestNumber=a.guestNumber,this.headImg=a.headImg,this.linkedNumber=0,this.nickName=a.nickname,this.taskNum=a.taskNum,this.headBgColor=a.pa.headBgColorWhite,this.pointColor=a.pa.pointColorGray,this.sex=a.sex,this.pa=a.pa,this.image=a.image,this.drawHead(),this.canvas=document.createElement("canvas"),this.canvas.width=this.pa.headSize,this.canvas.height=this.pa.headSize,this.linkedNumber=0,this.linkedLine=null,this.onlinked=!1,this.onSelected=!1,this.linking=!1}function d(a){this.pa=a.pa,this.beiginX=a.pointX,this.beiginY=a.pointY,this.endX=a.pointX,this.endY=a.pointY}var e=Z,f=getValueFromSearch("actId"),g=getValueFromSearch("actToken"),h=new Image,i=new Image;h.src=window.imgUrl.maleHead,i.src=window.imgUrl.femaleHead;var j,k=Math.ceil(2.5*window.fontSize),l=2.5*window.fontSize,m=15.5*window.fontSize,n=1.5*window.fontSize,o=e(".headBg .linedGuest.male"),p=e(".headBg .linedGuest.male .name"),q=e(".headBg .linedGuest.female"),r=e(".headBg .linedGuest.female .name"),s=e(".headBg .middleLine"),t=e(".headBg .linedGuest");e.ajax({url:window.actionUrl.getActDetail.url,type:window.actionUrl.getActDetail.type,data:e.extend({actId:f,actToken:g},getCommonReqData()),success:function(b){b=checkReply(b),b&&a(b)},error:function(a){noNetwork()}}),b.prototype={init:function(){for(var a=this,b=0;b<this.pairs;b++)a.person.push(new c(e.extend({image:a.menHead[b],pa:a,sex:"1"},a.males[b]))),a.person.push(new c(e.extend({image:a.woMenHead[b],pa:a,sex:"0"},a.females[b])));this.drawHeadBgWhite(),this.drawHeadBgPink(),this.drawPointGray(),this.drawPointPink(),this.drawDefaultHead(),this.run(),this.controller()},controller:function(){var a,b,c,f=this,g=(this.headSize/2+this.headTop/2)/this.scale,h=e(f.canvas).offset().top;e(f.canvas).on("touchstart",function(d){var e=0;if(f.bindEvent){a=d.touches[0].pageX,b=d.touches[0].pageY-h;for(var i=0;i<2*f.pairs;i++){var j=f.person[i];if(a<j.arcX/f.scale+g&&a>j.arcX/f.scale-g&&b<j.arcY/f.scale+g&&b>j.arcY/f.scale-g){j.onSelected=!0,c=j,e++,f.linkPeople(c);break}}1>e&&(c=null)}}),e(f.canvas).on("touchmove",function(b){var e=b.touches[0].pageX,i=b.touches[0].pageY-h,j=e-a;if(0!=j&&c){if(b.preventDefault(),1==c.onlinked){delete f.lines[c.linkedLine],c.onlinked=!1,c.linkedNumber=0;for(var k=0;k<2*f.pairs;k++)f.person[k].sex!=c.sex&&f.person[k].linkedNumber==c.guestNumber&&(f.person[k].onlinked=!1,f.person[k].linkedNumber=0,f.person[k].linking=!1,f.person[k].onSelected=!1)}var l=c.sex*f.pairs+c.guestNumber;0==c.onlinked&&(f.lines[l]=new d(c)),f.lines[l].endX=e*f.scale,f.lines[l].endY=i*f.scale;for(var k=0;k<2*f.pairs;k++){var m=f.person[k];if(e<=m.arcX/f.scale+g&&e>=m.arcX/f.scale-g){if(i<=m.arcY/f.scale+g&&i>=m.arcY/f.scale-g&&m.sex!=c.sex&&0==m.onlinked){m.onSelected=!0,m.linking=!0,f.linkPeople(m);break}m.onSelected=!1,0==m.onlinked&&(m.linking=!1)}m.onSelected=!1,0==m.onlinked&&(m.linking=!1)}c.linking=!0,c.onSelected=!0}}),e(f.canvas).on("touchend",function(b){var d=0,e=b.changedTouches[0].pageX,i=b.changedTouches[0].pageY-h;if(a==e&&c)c&&(c.onSelected=!1),c&&(c.onlinked=!1),f.linkRefresh(),f.personalInfo(c);else if(c){c.onSelected=!1;for(var j=c.sex*f.pairs+c.guestNumber,k=0;k<2*f.pairs;k++){var l=f.person[k];if(e<=l.arcX/f.scale+g&&e>=l.arcX/f.scale-g&&i<=l.arcY/f.scale+g&&i>=l.arcY/f.scale-g&&l.sex!=c.sex&&0==l.onlinked){f.linkFinished(),f.lines[j].endX=l.pointX,f.lines[j].endY=l.pointY,c.onlinked=!0,c.linkedNumber=l.guestNumber,c.linkedLine=j,c.onSelected=!1,c.linking=!0,l.onlinked=!0,l.linkedNumber=c.guestNumber,l.linkedLine=j,l.onSelected=!1,l.linking=!0,c=null,d++;break}}for(var k=0;k<2*f.pairs;k++)f.person[k].onlinked||(f.person[k].linking=!1,f.person[k].onSelected=!1);console.log(f.person),1>d&&(c.linking=!1,delete f.lines[j],f.linkRefresh())}})},run:function(){function a(){if(b.headsFinished||2==b.headDefault){b.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var d=0;d<2*b.pairs;d++)b.person[d].render();for(var d in b.lines)b.lines[d].render()}c(a)}var b=this,c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,17)};a()},drawHeadBgWhite:function(){this.whiteHeadBg=document.createElement("canvas");var a=this.whiteHeadBg.getContext("2d"),b=this.headSize/2+this.borderSize;this.whiteHeadBg.width=2*b,this.whiteHeadBg.height=2*b,a.beginPath(),a.arc(b,b,b,0,2*Math.PI),a.closePath(),a.fillStyle=this.headBgColorWhite,a.fill()},drawHeadBgPink:function(){this.pinkHeadBg=document.createElement("canvas");var a=this.pinkHeadBg.getContext("2d"),b=this.headSize/2+this.borderSize;this.pinkHeadBg.width=2*b,this.pinkHeadBg.height=2*b,a.beginPath(),a.arc(b,b,b,0,2*Math.PI),a.closePath(),a.fillStyle=this.headBgColorPink,a.fill()},drawPointGray:function(){this.GrayPoint=document.createElement("canvas");var a=this.GrayPoint.getContext("2d"),b=this.pointSize/2;this.GrayPoint.width=2*b,this.GrayPoint.height=2*b,a.beginPath(),a.arc(b,b,b,0,2*Math.PI),a.closePath(),a.fillStyle=this.pointColorGray,a.fill()},drawPointPink:function(){this.pinkPoint=document.createElement("canvas");var a=this.pinkPoint.getContext("2d"),b=this.pointSize/2;this.pinkPoint.width=2*b,this.pinkPoint.height=2*b,a.beginPath(),a.arc(b,b,b,0,2*Math.PI),a.closePath(),a.fillStyle=this.pointColorPink,a.fill()},drawDefaultHead:function(){var a=this,b=new Image;b.src=this.defaultFemaleHead,b.onload=function(){a.drawHead(b,"female"),delete b};var c=new Image;c.src=this.defaultMaleHead,c.onload=function(){a.drawHead(c,"male"),delete c}},drawHead:function(a){this.headDefault++,this.maleDefault=document.createElement("canvas"),this.maleDefault.width=this.headSize,this.maleDefault.height=this.headSize,this.maleCtx=this.maleDefault.getContext("2d"),this.maleCtx.drawImage(a,0,0,this.headSize,this.headSize),this.femaleDefault=document.createElement("canvas"),this.femaleDefault.width=this.headSize,this.femaleDefault.height=this.headSize,this.femaleCtx=this.femaleDefault.getContext("2d"),this.femaleCtx.drawImage(a,0,0,this.headSize,this.headSize)},_showPersonDetail:function(a){window.location.href="guestInfo.html"+getCommonParams()+"&actId="+encodeURIComponent(f)+"&actToken="+g+"&sex="+encodeURIComponent(a.sex)+"&num="+encodeURIComponent(a.guestNumber)}},c.prototype={drawHead:function(){var a=this.pa,b=this,c=new Image;c.src=this.headImg,c.onload=function(){b.headImage=this,a.peopleCount++,a.peopleCount==2*a.pairs&&(a.bindEvent=!0);var c=document.createElement("canvas"),d=c.getContext("2d");c.width=a.headSize,c.height=a.headSize;var e,f,g,h,i=this.width,j=this.height,k=a.headSize;j>=i?(e=k/i,f=e*j,g=0,h=(k-f)/2,d.drawImage(this,g,h,f,k)):(e=k/j,f=e*i,g=(k-f)/2,h=0,d.drawImage(this,g,h,k,f));var l=k/2,m=k/2,n=k/2;d.save(),d.beginPath(),d.arc(l,m,n,0,1*Math.PI),d.lineTo(0,k),d.lineTo(k,k),d.closePath(),d.clip(),d.clearRect(0,0,k,k),d.restore(),d.beginPath(),d.arc(l,m,n,0,1*Math.PI,!0),d.lineTo(0,0),d.lineTo(k,0),d.closePath(),d.clip(),d.clearRect(0,0,k,k),b.canvas.getContext("2d").drawImage(c,0,0,a.headSize,a.headSize)}},render:function(){var a,b=this,c=this.pa,d=0,e=0,f=c.headTop*this.guestNumber+c.borderSize+(2*c.borderSize+c.headSize)*(this.guestNumber-1),g=c.canvas.width/2;this.Top=f,this.arcY=f+c.headSize/2,this.pointY=f+c.headSize/2;var h,i;1==this.sex?(a=c.maleDefault,d=g+c.betweenPoint+c.pointSize+c.pointMagin+c.borderSize,e=d-c.pointMagin-c.pointSize-c.borderSize,this.left=d,this.arcX=d+c.headSize/2,this.pointX=e+c.pointSize/2):0==this.sex&&(a=c.femaleDefault,d=g-c.betweenPoint-c.pointSize-c.pointMagin-c.headSize-c.borderSize,e=d+2*c.borderSize+c.headSize+c.pointMagin,this.left=d,this.arcX=d+c.headSize/2,this.pointX=e+c.pointSize/2),h=this.onSelected?c.pinkHeadBg:c.whiteHeadBg,i=this.linking?c.pinkPoint:c.GrayPoint,c.ctx.drawImage(h,d-c.borderSize,f-c.borderSize),c.ctx.drawImage(i,e,f+c.headSize/2-c.pointSize/2),c.ctx.drawImage(a,d,f,c.headSize,c.headSize),c.ctx.drawImage(b.canvas,d,f,c.headSize,c.headSize)}},d.prototype={render:function(){var a=this.pa;a.ctx.drawImage(a.pinkPoint,this.endX-a.pointSize/2,this.endY-a.pointSize/2),a.ctx.beginPath(),a.ctx.lineWidth=3,a.ctx.moveTo(this.beiginX,this.beiginY),a.ctx.lineTo(this.endX,this.endY),a.ctx.strokeStyle=a.lineColor,a.ctx.stroke()}}});
//# sourceMappingURL=zLianXian.com.js.map