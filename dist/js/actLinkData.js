"use strict";Z(function(){function a(a){console.log("renderDetail",a);var d,e,f,g=Math.ceil(2.2*window.fontSize),h="?"+qnImg.base()+qnImg.and+qnImg.min(g*window.dpi,g*window.dpi);replaceImgSrc(Z("#actNav"));var i=Math.ceil($(document.body).width()),j=Math.ceil(3.3*window.fontSize),k="?"+qnImg.base()+qnImg.and+qnImg.min(i,j)+qnImg.and+qnImg.blur(15,5);switch(lazyLoadImg(a.cover+k,Z("#actNav")),lazyLoadImg(a.creatorHead+h,Z("#creatorHead")),Z("#creatorName").html(a.creatorName),Z("#actTitle").html(a.title),Z("#actNum").html(getDateFromTs(a.createTime)+"桌"),Z("#actNav").on("click",function(){window.location.href="actDetail.html"+getCommonParams()+"&actId="+encodeURIComponent(b)+"&actToken="+encodeURIComponent(c)}),a.status){case window.actConfig.registering:f=window.imgUrl.registeringFlag;break;case window.actConfig.linking:f=window.imgUrl.linkingFlag;break;case window.actConfig.dating:f=window.imgUrl.datingFlag;break;default:return void alert("活动进度状态码异常:"+a.status)}var l=a.linkData;console.log("linkDataArray",l);var m=['<div class="chart">','<div class="count">{count}</div>','<div class="heads">','<div class="bgCon{femaleHead}"></div>','<div class="bgCon right{maleHead}"></div>',"</div>",'<div class="text">','<div class="num">{femaleNum}</div>','<div class="name textAutoHide">{femaleName}</div>',"</div>",'<div class="text right">','<div class="num">{maleNum}</div>','<div class="name textAutoHide">{maleName}</div>',"</div>",'<div class="data"><span>{percent}</span>支持</div>',"</div>"].join(""),n=[],o=[];for(d=0;d<a.pairs;d++)for(e=0;e<a.pairs;e++)if(a.females[e].guestNumber==d+1){n.push(a.females[e]);break}for(d=0;d<a.pairs;d++)for(e=0;e<a.pairs;e++)if(a.males[e].guestNumber==d+1){o.push(a.males[e]);break}console.log("femaleArray",n),console.log("maleArray",o);var p={},q="",r=[],s=0;for(d=0;d<a.pairs;d++)s+=l[0][d];for(d=0;d<a.pairs;d++)for(r.push([]),e=0;e<a.pairs;e++)r[d].push(100*l[d][e]/s);var t;for(d=0;d<a.pairs;d++)for(e=0;e<a.pairs;e++)p.count=d+1+"-"+(e+1),p.femaleHead=" f"+(d+1),p.maleHead=" m"+(e+1),p.femaleNum="女"+(d+1),p.maleNum="男"+(e+1),p.femaleName=n[d].nickname,p.maleName=o[e].nickname,t=Math.floor((r[d][e]+r[e][d])/2),p.percent=t+"%",q+=format(m,p);Z("#chartTab").html(q);var u=Math.ceil(2*window.fontSize);for(h="?"+qnImg.base()+qnImg.and+qnImg.min(u*window.dpi,u*window.dpi),d=0;d<a.pairs;d++)lazyLoadImg(n[d].headImg+h,Z("#chartTab").find(".f"+(d+1))),lazyLoadImg(o[d].headImg+h,Z("#chartTab").find(".m"+(d+1)));highchartsReady(function(){var b,c=[];for(b=0;b<a.pairs;b++)c.push(n[b].nickname);var d=[];for(b=0;b<a.pairs;b++)d.push({name:o[b].nickname,data:r[b]});jQuery("#graphTab").on("touchstart",function(a){a.preventDefault()}).highcharts({chart:{type:"column"},colors:["#30BF78","#6E96AD","#9B73D0","#D6C81C","#ea4c89"],title:{text:"连线百分比统计(总连线数:"+s+")"},credits:!1,exporting:{enabled:!1},legend:{itemMarginTop:10},xAxis:{categories:c,crosshair:!0},yAxis:{min:0,title:{text:null},labels:{format:"{value}%"}},tooltip:{shared:!0,useHTML:!0,formatter:function(){var a='<span style="font-size:10px">'+this.x+"</span><br/>",b=this.points.sort(function(a,b){return a.y<b.y?1:a.y>b.y?-1:0});return jQuery.each(b,function(b,c){a+='<br/><span style="color:'+c.series.color+'">'+c.series.name+"</span>: <b>"+c.y+"%</b>"}),a}},plotOptions:{series:{events:{legendItemClick:function(a){return!(window.isMobile&&a.browserEvent instanceof MouseEvent)}}},column:{pointPadding:.2,borderWidth:0}},series:d}),$(".highcharts-container").each(function(){var a;a=$('<div class="chart-drag-handle">'),$(this).append(a),a.on("touchstart",function(a){a.stopPropagation()}),a.on("touchmove",function(a){a.stopPropagation()}),a.on("touchend",function(a){a.stopPropagation()}),a.on("touchcancel",function(a){a.stopPropagation()})})})}var b=getValueFromSearch("actId"),c=getValueFromSearch("actToken");Z.ajax({url:window.actionUrl.getActDetail.url,type:window.actionUrl.getActDetail.type,data:Z.extend({actId:b,actToken:c},getCommonReqData()),success:function(b){b=checkReply(b),b&&a(b)},error:function(a){noNetwork()}})});
//# sourceMappingURL=actLinkData.js.map